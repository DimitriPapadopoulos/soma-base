cmake_minimum_required( VERSION 2.6 )

project( soma-base )

find_package( soma-infra REQUIRED )

set( CPACK_PACKAGE_NAME "${PROJECT_NAME}" )
set( CPACK_PACKAGE_VENDOR "CEA - NeuroSpin" )
set( CPACK_PACKAGE_VERSION_MAJOR 4 )
set( CPACK_PACKAGE_VERSION_MINOR 0 )
set( CPACK_PACKAGE_VERSION_PATCH 0 )
set( CPACK_PACKAGE_FILE_NAME "${CPACK_PACKAGE_NAME}-${CPACK_PACKAGE_VERSION_MAJOR}.${CPACK_PACKAGE_VERSION_MINOR}.${CPACK_PACKAGE_VERSION_PATCH}-linux-i686")
set( CPACK_PACKAGE_INSTALL_DIRECTORY "${CPACK_PACKAGE_NAME}-${CPACK_PACKAGE_VERSION_MAJOR}.${CPACK_PACKAGE_VERSION_MINOR}" )

set( ${PROJECT_NAME}_VERSION_MAJOR ${CPACK_PACKAGE_VERSION_MAJOR} )
set( ${PROJECT_NAME}_VERSION_MINOR ${CPACK_PACKAGE_VERSION_MINOR} )
set( ${PROJECT_NAME}_VERSION_PATCH ${CPACK_PACKAGE_VERSION_PATCH} )
set( ${PROJECT_NAME}_VERSION ${${PROJECT_NAME}_VERSION_MAJOR}.${${PROJECT_NAME}_VERSION_MINOR}.${${PROJECT_NAME}_VERSION_PATCH} )

include( CPack )

SOMA_CREATE_MAIN_COMPONENTS()

set( ${PROJECT_NAME}_IS_COMPILED ON PARENT_SCOPE )

find_package( PythonInterp REQUIRED )
find_package( Epydoc )
find_package( Dot )

# set( CMAKE_RUNTIME_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/bin )
# set( CMAKE_LIBRARY_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/lib )

SOMA_COPY_PYTHON_DIRECTORY( "${CMAKE_CURRENT_SOURCE_DIR}/python"
                            ${PROJECT_NAME}-python ${PROJECT_NAME} )
SOMA_COPY_DIRECTORY( "${CMAKE_CURRENT_SOURCE_DIR}/share" 
                      "share/${PROJECT_NAME}-${CPACK_PACKAGE_VERSION_MAJOR}.${CPACK_PACKAGE_VERSION_MINOR}"
                      ${PROJECT_NAME}-share ${PROJECT_NAME} )
SOMA_COPY_DIRECTORY( "${CMAKE_CURRENT_SOURCE_DIR}/bin"
                      bin
                      ${PROJECT_NAME}-bin ${PROJECT_NAME} )
SOMA_COPY_DIRECTORY( "${CMAKE_CURRENT_SOURCE_DIR}/examples/soma"
                    "share/doc/${PROJECT_NAME}-${CPACK_PACKAGE_VERSION_MAJOR}.${CPACK_PACKAGE_VERSION_MINOR}/examples"
                    ${PROJECT_NAME}-examples ${PROJECT_NAME}-doc )
SOMA_GENERATE_EPYDOC_DOC( ${PROJECT_NAME}-epydoc ${PROJECT_NAME}-epydoc
  "${CMAKE_CURRENT_SOURCE_DIR}/python"
  "share/doc/${PROJECT_NAME}-${CPACK_PACKAGE_VERSION_MAJOR}.${CPACK_PACKAGE_VERSION_MINOR}/epydoc/html" ) 

SOMA_CREATE_CMAKE_CONFIG_FILES()
