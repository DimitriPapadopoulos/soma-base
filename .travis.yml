sudo: false

matrix:
  include:
    - os: osx
      language: generic
    - os: linux
      language: python
      python:
        - 2.6
    - os: linux
      language: python
      python:
        - 2.7
    - os: linux
      language: python
      python:
        - 3.5

before_install:
    # osx deps
    - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew uninstall --ignore-dependencies python; fi
    - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew update; fi
    - if [[ "$TRAVIS_OS_NAME" == "osx" ]]; then brew install python3; fi

install:
    - pip install numpy six
    - if [ ${TRAVIS_PYTHON_VERSION} == "2.6" ]; then pip install "traits==4.6.0"; else pip install traits ;fi
    - pip install argparse
    - pip install pycrypto
    - if [ ${TRAVIS_PYTHON_VERSION} == "2.6" ]; then pip install 'pyyaml<5'; else pip install pyyaml; fi
    # module queue
    - pip install future
    - if [ ${TRAVIS_PYTHON_VERSION:0:1} == "2" ]; then pip install subprocess32; fi
    - if [ ${TRAVIS_PYTHON_VERSION:0:1} == "2" ]; then pip install importlib; fi
    - pip install codecov
    # to test notebooks
    - if [ ${TRAVIS_PYTHON_VERSION} != "2.6" ]; then pip install jupyter nbconvert; fi
    - python setup.py install

script:
    - coverage run -m soma.tests.test_soma_base

after_success:
    - codecov
