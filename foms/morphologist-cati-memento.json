{
  "fom_name" : "morphologist-cati-memento",  
  
  "fom_import" : [ "formats-brainvisa-1.0", "shared-brainvisa-1.0" ],

  "attribute_definitions" : {   
    "sulci_recognition_session" :  { "default_value" : "default_session"},
    "acquisition" : { "default_value" : "default_acquisition" }
  },

  "shared_patterns" : {
    "acquisition_input" : "<study>/CONVERTED/<center>/<subject>/<time_point>/<modality>/<acquisition>",
    "acquisition" : "<study>/ANALYSIS/<center>/<subject>/<time_point>/<modality>/<acquisition>",
  },
  
  "processes" : {  
    "morphologistSimp.SimplifiedMorphologist" : {
       "t1mri": [ [ "input:{acquisition_input}/<subject>_<time_point>_<acquisition>_<sequence>", "images" ] ,
                  [ "input:{acquisition_input}/normalized_<normalization>_<subject>_<time_point>_<acquisition>_<sequence>", "images" ] ],
       #Commissure Coordinates
       "commissure_coordinates": [ [ "input:{acquisition}/<subject>", "Commissure coordinates" ] ],
        ##SPM Normalization
       "anatomical_template": "{shared.anatomical_templates}",
       "job_file": [ [ "output:{acquisition}/<subject>_job_anat_normalization", [ "Matlab", "Matlab bz2", "XML" ] ] ],
       "transformations_information": [ [ "output:{acquisition}/<subject>_sn", "Matlab" ] ],
       "normalized_t1mri": [ [ "output:{acquisition}/normalized_<normalization>_<subject>","images", { "normalization":"SPM" } ] ], 
       "talairach_MNI_transform": [ [ "output:{acquisition}/registration/RawT1-<subject>_<acquisition>_TO_Talairach-MNI", 
                                      "Transformation matrix" ] ],
        ##Talairach Transformation
       "source_referential": [ [ "input:{acquisition}/registration/RawT1-<subject>_<acquisition>", "Referential" ] ],
       "normalized_referential": "{shared.mni_spm_referential}",
       "tal_to_normalized_transform": "{shared.talairach_TO_spm_transform}",

       #Bias Correction 
       "t1mri_nobias": [ ["output:{acquisition}/nobias_<subject>", "images" ] ], 
       "hfiltered": [ ["output:{acquisition}/hfiltered_<subject>",  "images"] ], 
       "white_ridges": [ ["output:{acquisition}/whiteridge_<subject>", "images"] ], 
       "variance": [ ["output:{acquisition}/variance_<subject>","images"] ], 
       "edges": [ ["output:{acquisition}/edges_<subject>","images"] ], 
       "field": [ ["output:{acquisition}/biasfield_<subject>","images"] ], 
       "meancurvature": [ ["output:{acquisition}/mean_curvature_<subject>", "images" ] ],

       #Histogram Analysis
       "histo": [ ["output:{acquisition}/nobias_<subject>", "Histogram" ] ],
       "histo_analysis": [ ["output:{acquisition}/nobias_<subject>", "Histo Analysis"   ] ] ,

       #Brain Mask Segmentation
       "brain_mask": [ ["output:{acquisition}/segmentation/brain_<subject>","images"] ],

       #Split Brain Mask 
       "split_brain": [ ["output:{acquisition}/segmentation/split_<subject>","images"] ],  
       "split_template": [ ["shared:hemitemplate/closedvoronoi","images"] ], 

       #Talairach Transformation
       "talairach_ACPC_transform": [ [ "output:{acquisition}/registration/RawT1-<subject>_<acquisition>_TO_Talairach-ACPC","Transformation matrix"] ], 

       #Grey/White Classification
       "left_grey_white": [ ["output:{acquisition}/segmentation/<side>_greywhite_<subject>","images",{'side':'left'}] ], 
       "right_grey_white": [ ["output:{acquisition}/segmentation/<side>_greywhite_<subject>","images",{'side':'right'}] ],

       #Grey/White Surface
       "left_hemi_cortex": [ ["output:{acquisition}/segmentation/<side>_cortex_<subject>","images",{'side':'left'}] ], 
       "left_white_mesh": [ ["output:{acquisition}/segmentation/mesh/<subject>_<side>_white","MNI OBJ mesh",{'side':'left'}] ], 
       "right_hemi_cortex": [ ["output:{acquisition}/segmentation/<side>_cortex_<subject>","images",{'side':'right'}] ], 
       "right_white_mesh": [ ["output:{acquisition}/segmentation/mesh/<subject>_<side>_white","MNI OBJ mesh",{'side':'right'}] ], 

       #Spherical Hemispheres Surface
       "left_hemi_mesh": [ ["output:{acquisition}/segmentation/mesh/<subject>_<side>_hemi","MNI OBJ mesh",{'side':'left'}] ], 
       "right_hemi_mesh": [ ["output:{acquisition}/segmentation/mesh/<subject>_<side>_hemi","MNI OBJ mesh",{'side':'right'}] ], 

       #Cortical Folds Graph
       "left_graph": [ ["output:{acquisition}/folds/<graph_version>/<side>_<subject>","Graph and data", {'side':'left','labelled':'No', 'graph_version':'3.1'} ] ], 
       "left_skeleton": [ ["output:{acquisition}/segmentation/<side>_skeleton_<subject>","images",{'side':'left'}] ], 
       "left_roots": [ ["output:{acquisition}/segmentation/<side>_roots_<subject>","images",{'side':'left'}] ], 
       "left_sulci_voronoi": [ ["output:{acquisition}/folds/<graph_version>/<side>_sulcivoronoi_<subject>","images",{'side':'left','graph_version':'3.1'}],["output:{acquisition}/folds/<graph_version>/<side>_sulcivoronoi_<subject>", "images",{'side':'left','graph_version':'3.1'} ] ],
       "left_middle_cortex": [ [ "output:{acquisition}/segmentation/<side>_gw_interface_<subject>","images",{'side':'left'}] ], 
       "right_graph": [ ["output:{acquisition}/folds/<graph_version>/<side>_<subject>","Graph and data", {'side':'right','labelled':'No', 'graph_version':'3.1'}] ], 
       "right_skeleton": [ ["output:{acquisition}/segmentation/<side>_skeleton_<subject>","images",{'side':'right'}] ], 
       "right_roots": [ [ "output:{acquisition}/segmentation/<side>_roots_<subject>", "images", { "side": "right" } ] ], 
       "right_sulci_voronoi": [ ["output:{acquisition}/folds/<graph_version>/<side>_sulcivoronoi_<subject>","images",{'side':'right','graph_version':'3.1'}],["output:{acquisition}/folds/<graph_version>/<side>_sulcivoronoi_<subject>", "images",{'side':'right','graph_version':'3.1'} ] ],
       "right_middle_cortex": [ ["output:{acquisition}/segmentation/<side>_gw_interface_<subject>","images",{ "side": "right" }] ], 

       #Sulci Recognition
       "labels_translation_map": "{shared.surface_referential_translation_map}", 
        ##Left
       "left_labelled_graph": [["output:{acquisition}/folds/<graph_version>/<sulci_recognition_session>_auto/<side>_<subject>_<sulci_recognition_session>_auto","Graph and data",{'side':'left','graph_version':'3.1','automatically_labelled':'Yes'}]], 

       "left_posterior_probabilities": [ ["output:{acquisition}/folds/<graph_version>/<sulci_recognition_session>_auto/<side>_<subject>_<sulci_recognition_session>_auto_proba","CSV file",{ "side" : "left",'graph_version':'3.1'}  ] ], 
       "left_labels_priors": [ ["shared:models/models_<sulci_database>/descriptive_models/labels_priors/<filename_variable>_priors_<side>/<filename_variable>_priors","Text Data Table",{"sulci_database":"2008","filename_variable":"frequency_segments","side":"left"}] ], 

            ###Global
       "left_global_model": "{shared.spam_distribs}", 
       "left_tal_to_global_transform": [ ["output:{acquisition}/folds/<graph_version>/<sulci_recognition_session>_auto/<side>_<subject>_<sulci_recognition_session>_auto_Tal_TO_SPAM","Transformation matrix",{'side':'left','graph_version':'3.1'}] ], 
       "left_t1_to_global_transform": [ [ "output:{acquisition}/folds/<graph_version>/<sulci_recognition_session>_auto/<side>_<subject>_<sulci_recognition_session>_auto_T1_TO_SPAM","Transformation matrix",{'side':'left','graph_version':'3.1'}] ],

            ###Local
       "left_local_model": [ ["shared:models/models_<sulci_database>/descriptive_models/segments/<sulci_segments_model_type>_<side>/<filename_variable>_distribs" ,"Text Data Table",{"sulci_database":"2008","sulci_segments_model_type":"locally_from_global_registred_spam","filename_variable":"spam","side":"left"}] ], 
       "left_local_referentials": [ ["shared:models/models_<sulci_database>/descriptive_models/segments/<sulci_segments_model_type>_<side>/local_referentials" ,"Text Data Table",{"sulci_database":"2008","sulci_segments_model_type":"locally_from_global_registred_spam","side":"left"}] ], 
       "left_direction_priors": [ ["shared:models/models_<sulci_database>/descriptive_models/segments/<sulci_segments_model_type>_<side>/<filename_variable>_direction_trm_priors" ,"Text Data Table",{"sulci_database":"2008","sulci_segments_model_type":"locally_from_global_registred_spam","filename_variable":"bingham","side":"left"}] ], 
       "left_angle_priors": [ [ "shared:models/models_<sulci_database>/descriptive_models/segments/<sulci_segments_model_type>_<side>/<filename_variable>_angle_trm_priors", "Text Data Table", {"sulci_database":"2008","sulci_segments_model_type":"locally_from_global_registred_spam","filename_variable":"vonmises","side":"left"}] ], 
       "left_translation_priors": [ ["shared:models/models_<sulci_database>/descriptive_models/segments/<sulci_segments_model_type>_<side>/<filename_variable>_translation_trm_priors","Text Data Table", {"sulci_database":"2008","sulci_segments_model_type":"locally_from_global_registred_spam","filename_variable":"gaussian","side":"left"}] ], 
       "left_global_to_local_transforms": [ ["output:{acquisition}/folds/<graph_version>/<sulci_recognition_session>_auto/<side>_<subject>_<sulci_recognition_session>_auto_global_TO_local","Directory",{'side':'left','graph_version':'3.1'}] ], 

        ##Right
       "right_labelled_graph": [ ["output:{acquisition}/folds/<graph_version>/<sulci_recognition_session>_auto/<side>_<subject>_<sulci_recognition_session>_auto","Graph and data",{'side':'right','graph_version':'3.1'}] ],
      "right_posterior_probabilities": [ [ "output:{acquisition}/folds/<graph_version>/<sulci_recognition_session>_auto/<side>_<subject>_<sulci_recognition_session>_auto_proba", "CSV file" , { "side" : "right",'graph_version':'3.1'} ] ],
       "right_labels_priors": [ ["shared:models/models_<sulci_database>/descriptive_models/labels_priors/<filename_variable>_priors_<side>/<filename_variable>_priors","Text Data Table",{"sulci_database":"2008","filename_variable":"frequency_segments","side":"right"} ] ], 
    
            ###Global
       "right_global_model": [ ["shared:models/models_<sulci_database>/descriptive_models/segments/<sulci_segments_model_type>_<side>/<filename_variable>_distribs" ,"Text Data Table",{"sulci_database":"2008","sulci_segments_model_type":"global_registered_spam","filename_variable":"spam","side":"right"}] ], 
       "right_tal_to_global_transform": [ ["output:{acquisition}/folds/<graph_version>/<sulci_recognition_session>_auto/<side>_<subject>_<sulci_recognition_session>_auto_Tal_TO_SPAM","Transformation matrix",{'side':'right','graph_version':'3.1'} ] ], 
       "right_t1_to_global_transform": [ [ "output:{acquisition}/folds/<graph_version>/<sulci_recognition_session>_auto/<side>_<subject>_<sulci_recognition_session>_auto_T1_TO_SPAM","Transformation matrix",{'side':'right','graph_version':'3.1'} ] ], 

            ###Local
        "right_local_model": [ ["shared:models/models_<sulci_database>/descriptive_models/segments/<sulci_segments_model_type>_<side>/<filename_variable>_distribs" ,"Text Data Table",{"sulci_database":"2008","sulci_segments_model_type":"locally_from_global_registred_spam","filename_variable":"spam","side":"right"}] ], 
        "right_local_referentials":[ ["shared:models/models_<sulci_database>/descriptive_models/segments/<sulci_segments_model_type>_<side>/local_referentials" ,"Text Data Table",{"sulci_database":"2008","sulci_segments_model_type":"locally_from_global_registred_spam","side":"right"}] ], 
        "right_direction_priors":  [ ["shared:models/models_<sulci_database>/descriptive_models/segments/<sulci_segments_model_type>_<side>/<filename_variable>_direction_trm_priors" ,"Text Data Table",{"sulci_database":"2008","sulci_segments_model_type":"locally_from_global_registred_spam","filename_variable":"bingham","side":"right"}] ],
        "right_angle_priors":  [ [ "shared:models/models_<sulci_database>/descriptive_models/segments/<sulci_segments_model_type>_<side>/<filename_variable>_angle_trm_priors", "Text Data Table", {"sulci_database":"2008","sulci_segments_model_type":"locally_from_global_registred_spam","filename_variable":"vonmises","side":"right"}] ], 
        "right_translation_priors":  [ ["shared:models/models_<sulci_database>/descriptive_models/segments/<sulci_segments_model_type>_<side>/<filename_variable>_translation_trm_priors","Text Data Table", {"sulci_database":"2008","sulci_segments_model_type":"locally_from_global_registred_spam","filename_variable":"gaussian","side":"right"}] ], 
       "right_global_to_local_transforms": [ [ "output:{acquisition}/folds/<graph_version>/<sulci_recognition_session>_auto/<side>_<subject>_<sulci_recognition_session>_auto_global_TO_local","Directory",{'side':'right','graph_version':'3.1'} ] ], 

    }
  }
}
